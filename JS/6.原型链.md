### instanceof

- 先说一下 `instanceof` 是干什么的，官方解释：用于检测构造函数的 prototype 属性是否出现在某个实例对象的原型链上 [传送门](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/instanceof)

- 最朴素的用法就是判断，一个对象是不是某个构造函数的实例

- 当 `obj instanceof Foo` 返回 true 时，并不代表它永远是 true，因为它的原型链引用时可以更改的

- 还可能用到的方法，[getPrototypeOf](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/GetPrototypeOf), [isPrototypeOf](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/isPrototypeOf)

- instanceof 的左右分别是 **对象** 和 **函数**， isPrototypeOf 操作的是两个对象 `A.isPrototypeOf(a)` 表示 A 是否出现在 a 的原型链上，注意区别

```js
function A() {}

const a = new A();

// A.prototype 是否在 a 的原型链上，下面的两种写法是相同的意义，看到区别了吗
a instanceof A; // true,
A.prototype.isPrototypeOf(a); // true,
```

- instanceof 的核心就是遍历左侧参数的原型链，看是否有满足条件的对象，手写：

```js
const instanceof_ = (obj, constructor) => {
  let objProto = obj.__proto;
  const targetPrototype = constructor.prototype;
  while (1) {
    // 所有原型链已经遍历完
    if (objProto === null) {
      return false;
    }
    if (objProto === targetPrototype) {
      return true;
    }
    objProto = objProto.__proto__;
  }
};
```

### 原型链
