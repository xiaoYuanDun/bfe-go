### http

一条 tcp 通路上, 同一时间只能用有一个 http 请求, 下一个请求必须等上一个得到相应, 才能发送(队头阻塞)

解决并发的方案: 物理层面增加多个 tcp 连接, 但效果一般

### http2

1. 加入 2 进制分帧层, 从原来的 http -> tcp, 变成 http -> 2 进制帧 -> tcp, 把原来的一个个请求转换成虚拟流的概念, 在一条 tcp 通路上可以存在多条流, 做到了 多路复用

2. 头部压缩

3. 服务器推送

- http2 基于 tls, 正式发送数据前需要进行 tcp 握手, tls 握手,

- 在 tcp 连接的层面上看, 所有帧都是乱序的, 但是每个帧都拥有一个流 ID, 实际上拥有相同流 ID 的帧不是乱序的, 他们是有严格的先后顺序的, 如有以下几个帧, 在 tcp 连接中被发送, 可以看出这种规律:

```js
stream_1: 1_1, 1_2, 1_3;
stream_2: 2_1, 2_2;
stream_3: 3_1, 3_2;

tcp通路: 2_1, 1_1, 2_2, 3_1, 3_2, 1_2, 1_3;
```

### http3

http2 基本解决了 http 的对头阻塞问题, 但并不是完全解决, 因为在 tcp 层, 依然存在着类似的队头阻塞问题

为了从根本上解决此问题, 推出了 http3, 但受制于协议本身的限制, http3 在传输层使用 UDP 协议替换了 TCP 协议

在 UDP 的基础上, 实现连接管理, 拥塞控制, 流量控制等原本在 tcp 上的特性, 实现可靠传输(UDP 本身不提供可靠服务, 只是尽力提供)

### QUIC 协议

#### 参考

- [http3](https://time.geekbang.org/column/article/115564)
