### TODO

##### tcp/ip 序列号

##### http2，队头阻塞

##### 网络安全

### 路由转发的流程:

1. 从数据包首部提取目标 IP 地址 D, 网络地址 N
2. 如果 D/N 是直接相连的, 直接发送数据
3. 路由表中是否有 D 的记录, 有就发送到对应的下一跳路由, 否则
4. 路由表中是否有 N 的记录, 有就发送到对应的下一跳路由, 否则
5. 路由表中是否有 默认路由, 有就发送给默认路由, 否则
6. 报错

每一次路由寻址并不会知道完整的路由路线, 只是在每一跳中重复以上过程

### TCP 的特点

1. 面向连接 - 必须要先建立 TCP 连接
2. 每一个 TCP 只能有两个端点 - 他们是 **(源 ip + 源 port), (目标 ip + 目标 port)**
3. 可靠的 - ip 协议并不可靠
4. 全双工
5. 面向字节流

### TCP 报文头部

最小 20 字节, 可以 4n 动态扩展, 最大为 60 字节, 具体分布看 **计网: P203-P224**

报文段往返事件 RTT, 超时重传时间 RTO, RTO 应略大于 RTT, 有响应算法可以保证: 使用正确有效的事件来计算 RTT 和 RTO **计网: P226**

### 滑动窗口

滑动窗口用来维持发送端和接收端的 收发速率平衡, 窗口大小是不断动态变化的(通过 tcp 头部确认号), 是做流量控制的

### 拥塞避免

tcp 进行拥塞控制的算法有四种:
慢开始 - 从 1 指数增长, 慢并不是指增长率低, 而是相比于一开始就把所有数据发送出去而言, 慢一些
拥塞避免 - 窗口达到预设值, 开始平稳增加窗口大小
快重传 - 接收端对收到的包进行快速响应, 发送端连续 3 次收到重读确认, 直接重发这个包, 而不用等到超时导致重发
快恢复 - 快重传情况下, 断定网络状况良好, cwnd 和 ssthresh 均降一半, 然后启动拥塞避免, 而非直接慢启动
