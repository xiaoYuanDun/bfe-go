### 为什么拆分

- 旧项目日益庞大，文档不完善，维护和新增功能的成本表大，可维护性可读性很差

- 为了项目之后可以稳定维护和扩展，想到了通过不同业务功能进行项目拆分，开发可以通过文件划分快速找到对应的页面，后期扩展也不用关心对其他业务造成影响

- 我们的需求，更多考虑的是工程上的拆分，不要求子应用的单独访问，我们也不会单独部署子应用
  我们更多的是把子应用看成一种加载资源，属于拆包之后的一个单独的逻辑模块

### 调研了哪些拆分方案

- qiankun，monorepo，在做复盘时，又发现了 changesets

-

### 拆分依据

- 按业务功能来拆包，一般情况下，一个顶级菜单项对应一个单独的包
- 一个登陆包
- 一个主应用基座包

### 功能职责

- 主包
  主要管理全局共享依赖，全局 lint 配置，发布脚本，基础 ts 配置

- 子包
  各自的 ts 配置，可以通过 extends 继承扩展，看情况

### 优化部分

- 因为子包不会单独使用，所以一些 peerDep 直接交给主应用来做，比如，react，react-dom，组件库等

### 衍生产物

- 组件库，解决夸库组件共享问题
- config 库，统一前后端格式化规范
- 脚手架模板，提供项目配置备忘，项目框架快速复用，新的子包可以快速接入开发
- 当然这些可以放在当前 packages 下维护，然后通过 lerna 控制打包流程，但考虑到我们的产出也可以用在其他项目，就起了单独的 repo，内部也是多包形式
