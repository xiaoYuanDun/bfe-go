# BFC 通关

### 个人理解

- 浏览器在处理页面文档的视觉显示时，会使用 **视觉格式化模型** 的理论依据，此理论中定义了 **盒** 的概念，主要的盒模型有三个：**块盒 `clock box`**，**行内盒 `inline box`**，**匿名盒 `anonymous box`**。

- 浏览器在进行元素定位时，会按照元素的 **盒类型** 和所在的上下文进行定位，应该说 **盒** 是定位的基本单位，通过操作一个个盒来构建视觉显示效果

- `BFC` 是一快完全独立的布局空间，让空间内的元素不受外界布局的影响，个人认为，这是 BFC 最重要的应用特征

- 同一个元素，不可能同时存在于两个 BFC 中

### 常见场景

- `BFC` 最直观和常见的例子就是，子节点设置 `float` 为 非 none 值后，脱离正常文档流，从而使父节点塌陷(没有被撑开)，这时可以通过给父元素触发 `BFC` 来解决这个问题
  解决了什么问题，怎么创建

- 另一个常见的例子是，同一个 BFC 内的，相邻节点的外边距垂直方向的塌陷(重合)，可以看到产生塌陷的要素有这几个：

1. 相邻的节点
2. 存在两个或多个节点
3. 垂直方向才会出现
4. 普通文档流

- 实际开发中，要解决这种塌陷问题，只要使上述条件中有任意一个不满足，即可

- BFC 可以包含浮动元素，也就是清除浮动

- BFC 可以阻止元素被浮动元素覆盖，可以用来实现两栏自适应，核心原理是后面的 **BFC 化** 元素不会配合前面的浮动元素的默认行为，在让出浮动元素的占位的同时，还保留了流体元素的横向扩展能力（宽度延伸到横向末尾处），具体可看 **BFC 做自适应**

---

### 面试逐字稿

- 首先 BFC 全称是 block formatting context 块级格式化上下文

- CSS 在计算元素布局时，会把每个元素描述成一个个矩形盒子，例如，块级盒子，行内盒子，匿名盒子等，每种盒子都有自己的布局特性，然后结合 常规流，浮动流，绝对定位 这三种布局方案，对元素进行布局

- 每个节点元素在进行布局时，都会根据当前所处的格式化上下文环境的布局规则进行布局，也就是 FC
  每个 FC 都是一块单独的布局区域，决定了内部元素及其子元素要以什么样的规则进行布局，以及如何和其他元素相互作用

- 同样 BFC 也可以看成是这整个渲染过程中的一块渲染区域，它是一块独立的布局空间，在 BFC 内的元素和它们的子元素在进行布局时，不会对 BFC 外的元素产生影响，这是它最重要的特征

- 一般会利用 BFC 的这个特性，做一些样式处理，如，清除浮动，消除外边距塌陷等问题

- 然后除了 <html> 元素会默认产生一个 BFC 外，还可以通过一些额外的样式来手动创建 BFC，包括
  overflow 设置为 非 visible
  display 设置为 flex, inline-block, table 等
  position 设置为 absolute, fixed
  float 设置为 非 none

- 个人理解，页面中所有节点元素都是 FC 的一部分，每个元素在进行布局时，就必须遵循当前 FC 环境的规则
  整个 DOM 就可以看成是一个，大大小小的 FC 嵌套的结构，每个元素都知道自己处于哪个 FC（环境）中，知道自己要如何进行布局

- BFC 就是 FC 的一种表现形式，布局方式类似于普通的流式布局，从上到下，从左到右另外常见的还有
  IFC，
  GFC，
  FFC，

---

参考资料

[BFC-0](https://juejin.cn/post/6950082193632788493)

[BFC-1](https://juejin.cn/post/6844903495108132877)

[BFC-2](https://juejin.cn/post/6860375101322461198)

[BFC 做自适应](https://www.zhangxinxu.com/wordpress/2015/02/css-deep-understand-flow-bfc-column-two-auto-layout/)
